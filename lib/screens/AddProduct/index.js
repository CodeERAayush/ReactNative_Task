var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _reactRedux=require("react-redux");var _slices=require("../../slices");var _CustomHeader=_interopRequireDefault(require("../../components/CustomHeader"));var _color=require("../../constants/color");var _fonts=require("../../assets/fonts");var _screen=require("../../constants/screen");var _TextComponentHOC=_interopRequireDefault(require("../../components/TextComponentHOC"));var _images=require("../../assets/images");var _ProductDetailHeader=_interopRequireDefault(require("../../components/ProductDetailHeader"));var _jsxRuntime=require("react/jsx-runtime");var _this=this,_jsxFileName="/Users/codeeraayush/Documents/Aviato_Task/Aviato_task/src/screens/AddProduct/index.js";function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap(),t=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r;})(e);}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u];}return n.default=e,t&&t.set(e,n),n;}var ProductForm=function ProductForm(_ref){var navigation=_ref.navigation;var _useState=(0,_react.useState)(''),_useState2=(0,_slicedToArray2.default)(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=(0,_react.useState)(''),_useState4=(0,_slicedToArray2.default)(_useState3,2),price=_useState4[0],setPrice=_useState4[1];var _useState5=(0,_react.useState)(''),_useState6=(0,_slicedToArray2.default)(_useState5,2),description=_useState6[0],setDescription=_useState6[1];var _useState7=(0,_react.useState)(''),_useState8=(0,_slicedToArray2.default)(_useState7,2),category=_useState8[0],setCategory=_useState8[1];var _useState9=(0,_react.useState)(''),_useState10=(0,_slicedToArray2.default)(_useState9,2),image=_useState10[0],setImage=_useState10[1];var _useState11=(0,_react.useState)(''),_useState12=(0,_slicedToArray2.default)(_useState11,2),weight=_useState12[0],setWeight=_useState12[1];var _useState13=(0,_react.useState)({}),_useState14=(0,_slicedToArray2.default)(_useState13,2),errors=_useState14[0],setErrors=_useState14[1];var dispatch=(0,_reactRedux.useDispatch)();var validateForm=function validateForm(){var newErrors={};if(!title.trim()){newErrors.title='Product name is required';}if(!price.trim()){newErrors.price='Price is required';}else if(isNaN(parseFloat(price))||parseFloat(price)<=0){newErrors.price='Price must be a positive number';}if(!description.trim()){newErrors.description='Description is required';}if(!category.trim()){newErrors.category='Category is required';}if(weight&&(isNaN(parseFloat(weight))||parseFloat(weight)<=0)){newErrors.weight='Weight must be a positive number';}if(image&&!isValidUrl(image)){newErrors.image='Invalid image URL';}setErrors(newErrors);return Object.keys(newErrors).length===0;};var isValidUrl=function isValidUrl(string){try{new URL(string);return true;}catch(_){return false;}};var handleSubmit=function handleSubmit(){if(validateForm()){var newProduct={title:title,price:parseFloat(price),description:description,category:category,image:image||'https://via.placeholder.com/150',weight:weight?parseFloat(weight):0};dispatch((0,_slices.addProduct)(newProduct)).unwrap().then(function(){_reactNative.Alert.alert('Success','Product added successfully');setTitle('');setPrice('');setDescription('');setCategory('');setImage('');setWeight('');navigation.goBack();}).catch(function(error){_reactNative.Alert.alert('Error',error.message);});}else{_reactNative.Alert.alert('Error','Please correct the errors in the form');}};var renderProductInfo=function renderProductInfo(label1,label2,value1,value2,onChangeText1,onChangeText2){var keyboardType1=arguments.length>6&&arguments[6]!==undefined?arguments[6]:'default';var keyboardType2=arguments.length>7&&arguments[7]!==undefined?arguments[7]:'default';var error1=arguments.length>8?arguments[8]:undefined;var error2=arguments.length>9?arguments[9]:undefined;var toShow=arguments.length>10?arguments[10]:undefined;return(0,_jsxRuntime.jsxs)(_reactNative.View,{style:styles.productInfoContainer,children:[(0,_jsxRuntime.jsxs)(_reactNative.View,{style:styles.inputContainer,children:[(0,_jsxRuntime.jsx)(_TextComponentHOC.default,{style:styles.labelText,children:label1}),(0,_jsxRuntime.jsx)(_reactNative.TextInput,{placeholderTextColor:_color.Colors==null?void 0:_color.Colors.gray,color:_color.Colors==null?void 0:_color.Colors.black,style:[styles.input,error1&&styles.inputError],value:value1,onChangeText:function onChangeText(text){onChangeText1(text);setErrors(function(prev){return Object.assign({},prev,(0,_defineProperty2.default)({},label1.toLowerCase(),null));});},placeholder:`Enter ${label1.toLowerCase()}`,keyboardType:keyboardType1}),error1&&(0,_jsxRuntime.jsx)(_reactNative.Text,{style:styles.errorText,children:error1})]}),(0,_jsxRuntime.jsxs)(_reactNative.View,{style:styles.inputContainer,children:[(0,_jsxRuntime.jsx)(_TextComponentHOC.default,{style:styles.labelText,children:label2}),(0,_jsxRuntime.jsxs)(_reactNative.View,{style:[styles.combinedInput,error2&&styles.inputError],children:[(0,_jsxRuntime.jsx)(_reactNative.TouchableOpacity,{style:styles.dropdownButton,children:(0,_jsxRuntime.jsxs)(_reactNative.Text,{style:styles.dropdownButtonText,children:[toShow,"   \u25BF  "]})}),(0,_jsxRuntime.jsx)(_reactNative.TextInput,{style:[styles.input,styles.combinedInputText],value:value2,onChangeText:function onChangeText(text){onChangeText2(text);setErrors(function(prev){return Object.assign({},prev,(0,_defineProperty2.default)({},label2.toLowerCase(),null));});},placeholder:`000`,keyboardType:keyboardType2})]}),error2&&(0,_jsxRuntime.jsx)(_reactNative.Text,{style:styles.errorText,children:error2})]})]});};return(0,_jsxRuntime.jsxs)(_reactNative.View,{style:styles.container,children:[(0,_jsxRuntime.jsx)(_CustomHeader.default,{onPress:function onPress(){return navigation.openDrawer();}}),(0,_jsxRuntime.jsx)(_ProductDetailHeader.default,{item:{image:image,title:title,description:description}}),(0,_jsxRuntime.jsxs)(_reactNative.ScrollView,{style:styles.formContainer,children:[renderProductInfo('Product Name','Price',title,price,setTitle,setPrice,'default','numeric',errors.title,errors.price,"USD"),renderProductInfo('Category','Weight',category,weight,setCategory,setWeight,'default','numeric',errors.category,errors.weight,"KG"),(0,_jsxRuntime.jsx)(_TextComponentHOC.default,{style:styles.labelText,children:"Description"}),(0,_jsxRuntime.jsxs)(_reactNative.View,{style:styles.descriptionContainer,children:[(0,_jsxRuntime.jsxs)(_reactNative.View,{style:styles.descriptionToolbar,children:[(0,_jsxRuntime.jsx)(_reactNative.TouchableOpacity,{children:(0,_jsxRuntime.jsx)(_reactNative.Text,{style:[styles.labelText,{color:_color.Colors==null?void 0:_color.Colors.btnDark}],children:"H1 \u25BF"})}),(0,_jsxRuntime.jsx)(_reactNative.Image,{source:_images.Images==null?void 0:_images.Images.tools,resizeMode:"contain",style:{height:(0,_screen.heightPxToDP)(3),width:(0,_screen.widthPxToDP)(60)}})]}),(0,_jsxRuntime.jsx)(_reactNative.TextInput,{style:[styles.descriptionInput,errors.description&&styles.inputError],value:description,onChangeText:function onChangeText(text){setDescription(text);setErrors(function(prev){return Object.assign({},prev,{description:null});});},placeholder:"Enter product description",multiline:true}),errors.description&&(0,_jsxRuntime.jsx)(_reactNative.Text,{style:styles.errorText,children:errors.description})]}),(0,_jsxRuntime.jsx)(_TextComponentHOC.default,{style:styles.labelText,children:"Image URL"}),(0,_jsxRuntime.jsx)(_reactNative.TextInput,{style:[styles.input,errors.image&&styles.inputError],value:image,onChangeText:function onChangeText(text){setImage(text);setErrors(function(prev){return Object.assign({},prev,{image:null});});},placeholder:"Enter image URL (optional)"}),errors.image&&(0,_jsxRuntime.jsx)(_reactNative.Text,{style:styles.errorText,children:errors.image}),(0,_jsxRuntime.jsx)(_reactNative.TouchableOpacity,{style:styles.submitButton,onPress:handleSubmit,children:(0,_jsxRuntime.jsx)(_reactNative.Text,{style:styles.submitButtonText,children:"Add Product"})}),(0,_jsxRuntime.jsx)(_reactNative.View,{style:{marginBottom:(0,_screen.heightPxToDP)(5)}})]})]});};var styles=_reactNative.StyleSheet.create({container:{flex:1,backgroundColor:_color.Colors==null?void 0:_color.Colors.white},formContainer:{padding:(0,_screen.widthPxToDP)(5)},formTitle:{fontSize:24,fontFamily:_fonts.Font==null?void 0:_fonts.Font.SemiBold,color:_color.Colors==null?void 0:_color.Colors.black,marginBottom:(0,_screen.heightPxToDP)(3)},productInfoContainer:{flexDirection:'row',justifyContent:'space-between',marginBottom:(0,_screen.heightPxToDP)(2)},inputContainer:{width:'48%'},labelText:{color:_color.Colors==null?void 0:_color.Colors.black,marginVertical:(0,_screen.heightPxToDP)(1),fontFamily:_fonts.Font==null?void 0:_fonts.Font.Medium,fontSize:15},input:{borderWidth:1,borderColor:_color.Colors==null?void 0:_color.Colors.lightGray,borderRadius:5,padding:(0,_screen.heightPxToDP)(1),fontFamily:_fonts.Font==null?void 0:_fonts.Font.Regular,fontSize:16,textAlign:'center'},combinedInput:{flexDirection:'row',borderWidth:1,borderColor:_color.Colors==null?void 0:_color.Colors.lightGray,borderRadius:5},combinedInputText:{flex:1,borderWidth:0},dropdownButton:{justifyContent:'center',alignItems:'center',paddingHorizontal:(0,_screen.widthPxToDP)(2),borderRightWidth:1,borderRightColor:_color.Colors==null?void 0:_color.Colors.lightGray,width:'40%'},dropdownButtonText:{fontFamily:_fonts.Font==null?void 0:_fonts.Font.SemiBold,fontSize:16,color:_color.Colors==null?void 0:_color.Colors.black},descriptionContainer:{marginBottom:(0,_screen.heightPxToDP)(2)},descriptionToolbar:{flexDirection:'row',alignItems:'center',justifyContent:'space-between',paddingHorizontal:(0,_screen.widthPxToDP)(3),borderWidth:1,borderRadius:5,borderColor:_color.Colors==null?void 0:_color.Colors.lightGray,borderBottomWidth:0,borderBottomLeftRadius:0,borderBottomRightRadius:0,paddingVertical:(0,_screen.heightPxToDP)(1)},descriptionInput:{borderWidth:1,borderColor:_color.Colors==null?void 0:_color.Colors.lightGray,borderRadius:5,borderTopLeftRadius:0,borderTopRightRadius:0,fontFamily:_fonts.Font==null?void 0:_fonts.Font.Regular,fontSize:16,padding:(0,_screen.heightPxToDP)(2),height:(0,_screen.heightPxToDP)(20),textAlignVertical:'top'},submitButton:{backgroundColor:_color.Colors==null?void 0:_color.Colors.btnDark,padding:(0,_screen.heightPxToDP)(2),borderRadius:5,alignItems:'center',marginTop:(0,_screen.heightPxToDP)(3)},submitButtonText:{color:_color.Colors==null?void 0:_color.Colors.white,fontSize:18,fontFamily:_fonts.Font==null?void 0:_fonts.Font.SemiBold},inputError:{borderColor:(_color.Colors==null?void 0:_color.Colors.error)||'red'},errorText:{color:(_color.Colors==null?void 0:_color.Colors.error)||'red',fontSize:12,fontFamily:_fonts.Font==null?void 0:_fonts.Font.Regular,marginTop:(0,_screen.heightPxToDP)(0.5)}});var _default=exports.default=ProductForm;